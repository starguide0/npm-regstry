# NPM Registry ëª¨ë…¸ë ˆí¬

ì´ í”„ë¡œì íŠ¸ëŠ” Turborepoì™€ pnpmì„ ì‚¬ìš©í•˜ëŠ” NPM íŒ¨í‚¤ì§€ ëª¨ë…¸ë ˆí¬ì…ë‹ˆë‹¤.

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

- **í”„ë¡œì íŠ¸ëª…**: npm-registry
- **ë²„ì „**: 1.0.0
- **íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €**: pnpm 8.15.6+
- **Node.js ë²„ì „**: 18.0.0+
- **ë¹Œë“œ ë„êµ¬**: Turborepo

## ğŸš€ ì‹œì‘í•˜ê¸°

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

- Node.js 18.0.0 ì´ìƒ (ê¶Œì¥: 20 LTS)
- pnpm 8.0.0 ì´ìƒ (í”„ë¡œì íŠ¸ëŠ” packageManager: pnpm@8.15.6 ê¸°ì¤€ ê²€ì¦)

### ì„¤ì¹˜

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
pnpm install
```

## ğŸ“¦ ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤í¬ë¦½íŠ¸

### ê°œë°œ/ë¹Œë“œ

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
pnpm install

# ë¹Œë“œ (Turboê°€ ê° íŒ¨í‚¤ì§€ build ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰)
pnpm build

# ê°œë°œ ëª¨ë“œ (íŒ¨í‚¤ì§€ë³„ dev ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰)
pnpm dev

# ë¦°íŠ¸ ê²€ì‚¬ (íŒ¨í‚¤ì§€ë³„ eslint ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰)
pnpm lint

# ì½”ë“œ í¬ë§·íŒ… (ë£¨íŠ¸ì—ì„œ ì „ì²´ íŒŒì¼ í¬ë§·)
pnpm format
```

### í…ŒìŠ¤íŠ¸

ì£¼ì˜: ë£¨íŠ¸ì—ì„œì˜ ë‹¨ì¼ Vitest ì‹¤í–‰(pnpm test:run)ì€ Node í™˜ê²½ì´ ê¸°ë³¸ì´ë¼ DOM(jsdom)ì´ í•„ìš”í•œ í…ŒìŠ¤íŠ¸ëŠ” ì‹¤íŒ¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒ¨í‚¤ì§€ë³„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë˜ëŠ” turbo ê¸°ë°˜ ì‹¤í–‰ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

ì¶”ê°€ë¡œ, Turbo íŒŒì´í”„ë¼ì¸ì—ì„œ test ì‘ì—…ì€ ìƒìœ„ íŒ¨í‚¤ì§€ì˜ buildì— ì˜ì¡´í•©ë‹ˆë‹¤(turbo.json: "test" â†’ dependsOn: ["^build"]). ë”°ë¼ì„œ pnpm test ì‹¤í–‰ ì‹œ í•„ìš”í•œ ë¹Œë“œê°€ ë¨¼ì € ìˆ˜í–‰ë©ë‹ˆë‹¤.

```bash
# turboë¥¼ í†µí•´ íŒ¨í‚¤ì§€ ì»¨í…ìŠ¤íŠ¸ì—ì„œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰(íŒ¨í‚¤ì§€ë³„ vitest.configë¥¼ ì¡´ì¤‘)
pnpm test

# ë£¨íŠ¸ ë‹¨ì¼ Vitest ì‹¤í–‰(ë¹ ë¥´ì§€ë§Œ í™˜ê²½ì€ ë£¨íŠ¸ ì„¤ì •: Node)
pnpm test:run

# Vitest UI
pnpm test:ui

# ì»¤ë²„ë¦¬ì§€
pnpm test:coverage

# íŒ¨í‚¤ì§€ë³„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì˜ˆì‹œ
pnpm vitest run packages/libs/src/some.spec.ts
```

### ë°°í¬/ë¦´ë¦¬ìŠ¤ (Changesets + GitHub Packages)

```bash
# ìë™ ì²´ì¸ì§€ì…‹ ìƒì„± (git ì»¤ë°‹ ê¸°ë°˜)
pnpm changeset:auto

# ë²„ì „ ë°˜ì˜ (ê° íŒ¨í‚¤ì§€ package.json & CHANGELOG ê°±ì‹ )
pnpm version-packages

# (ì„ íƒ) ë¡œì»¬ì—ì„œ ì‚¬ì „ ë¹Œë“œ
pnpm build

# ë¹Œë“œ í›„ GitHub Packagesì— publish (ì‚¬ì „ ì¸ì¦ í•„ìš”)
pnpm release
```

ì¸ì¦/í™˜ê²½ ë³€ìˆ˜:
- ë¡œì»¬ì—ì„œ ì„¤ì¹˜/ë¹Œë“œ/í…ŒìŠ¤íŠ¸ì—ëŠ” í† í°ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- publish ì‹œì—ëŠ” GitHub Tokenì„ NODE_AUTH_TOKENìœ¼ë¡œ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤.
  - ë¡œì»¬ ì˜ˆì‹œ: NODE_AUTH_TOKEN=ghp_xxx pnpm release
  - CIëŠ” .github/workflows/publish.ymlì—ì„œ secrets.GITHUB_TOKENì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

GitHub Packages ì„¤ì •(.npmrc ì˜ˆì‹œ):
- ì¡°ì§/ê³„ì • ìŠ¤ì½”í”„(@your-scope)ë¥¼ GitHub Packagesì— ì—°ê²°í•˜ê³  ì¸ì¦ í† í°ì„ ì£¼ì…í•´ì•¼ í•©ë‹ˆë‹¤.
- ì´ ë ˆí¬ëŠ” ì˜ˆì‹œ ìŠ¤ì½”í”„ë¡œ @starguide0ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```ini
@starguide0:registry=https://npm.pkg.github.com
//npm.pkg.github.com/:_authToken=${NODE_AUTH_TOKEN}
```

ì£¼ì˜:
- ë¡œì»¬ì—ì„œ pnpm install ì‹œ .npmrcì˜ ${NODE_AUTH_TOKEN} ì¹˜í™˜ ê²½ê³ ê°€ ë³´ì¼ ìˆ˜ ìˆìœ¼ë‚˜, í…ŒìŠ¤íŠ¸/ë¹Œë“œì—ëŠ” ì˜í–¥ì´ ì—†ìŠµë‹ˆë‹¤(ì‹¤ì œ publish ì‹œì—ë§Œ í•„ìš”).

## ğŸ¤– ìë™ ì²´ì¸ì§€ì…‹ ìƒì„±

Git ì»¤ë°‹ íˆìŠ¤í† ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìë™ìœ¼ë¡œ ì²´ì¸ì§€ì…‹ì„ ìƒì„±í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

### ì‚¬ìš©ë²•

```bash
# 1) ê¸°ë³¸ ì‹¤í–‰: ìë™ ê¸°ì¤€ ë¸Œëœì¹˜ íƒìƒ‰(upstream â†’ origin/main â†’ main ...)
#    í˜„ì¬ ì‘ì—… ë¸Œëœì¹˜ë¥¼ ì†ŒìŠ¤ ë¸Œëœì¹˜ë¡œ ê°„ì£¼í•˜ì—¬ ì²´ì¸ì§€ì…‹ì„ ìƒì„±í•©ë‹ˆë‹¤.
pnpm changeset:auto

# 2) ì†ŒìŠ¤/íƒ€ê²Ÿ ë¸Œëœì¹˜ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•˜ì—¬ ì‹¤í–‰
#    í˜•ì‹: node scripts/auto-changeset.mjs [pr-url?] <source-branch> [target-branch]
node scripts/auto-changeset.mjs origin/feature/add-xyz origin/main

# 3) PR URLì„ í¬í•¨í•˜ì—¬ ì‹¤í–‰(ìƒì„±ëœ Changeset í•˜ë‹¨ì— PR ë§í¬ê°€ ì²¨ë¶€ë¨)
node scripts/auto-changeset.mjs https://github.com/your-org/your-repo/pull/123 origin/feature/add-xyz origin/main

# 4) íƒ€ê²Ÿ ë¸Œëœì¹˜ë¥¼ ìƒëµí•˜ë©´ ìë™ íƒìƒ‰ë©ë‹ˆë‹¤(ê¶Œì¥: ì›ê²© ê¸°ì¤€ìœ¼ë¡œ fetch ìµœì‹ í™” í›„ ì‚¬ìš©)
node scripts/auto-changeset.mjs origin/feature/add-xyz

# 5) pnpmìœ¼ë¡œ ë™ì¼í•˜ê²Œ ì‹¤í–‰í•˜ê¸°
pnpm node scripts/auto-changeset.mjs origin/feature/add-xyz origin/main
```

ì£¼ì˜ ì‚¬í•­:
- ìŠ¤í¬ë¦½íŠ¸ëŠ” <target-branch>ì™€ <source-branch>ì˜ merge-baseë¶€í„° <source-branch>ê¹Œì§€ì˜ ë³€ê²½ë§Œ ë¶„ì„í•©ë‹ˆë‹¤.
- ë¡œì»¬ì— í•´ë‹¹ ë¸Œëœì¹˜/ë¦¬ëª¨íŠ¸ ì°¸ì¡°ê°€ ì¡´ì¬í•˜ê³  ìµœì‹  ìƒíƒœì—¬ì•¼ í•©ë‹ˆë‹¤. í•„ìš” ì‹œ `git fetch --all --prune` í›„ ì‹¤í–‰í•˜ì„¸ìš”.

### ì‘ë™ ë°©ì‹

1. **ì»¤ë°‹ ë¶„ì„**: main ë¸Œëœì¹˜ì™€ í˜„ì¬ ìƒíƒœ ì‚¬ì´ì˜ ì»¤ë°‹ì„ ë¶„ì„í•©ë‹ˆë‹¤
2. **íŒ¨í‚¤ì§€ ì‹ë³„**: ê° ì»¤ë°‹ì—ì„œ ë³€ê²½ëœ íŒŒì¼ì„ í™•ì¸í•˜ì—¬ ì˜í–¥ë°›ì€ íŒ¨í‚¤ì§€ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤
3. **ìë™ ë¶„ë¥˜**: ì»¤ë°‹ ë©”ì‹œì§€ì˜ ì ‘ë‘ì‚¬(`feat:`, `fix:`, `chore:` ë“±)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ì„ ë¶„ë¥˜í•©ë‹ˆë‹¤
4. **ì²´ì¸ì§€ì…‹ ìƒì„±**: íŒ¨í‚¤ì§€ë³„ë¡œ ì ì ˆí•œ ë²„ì „ íƒ€ì…ê³¼ í•œêµ­ì–´ ìš”ì•½ì´ í¬í•¨ëœ ì²´ì¸ì§€ì…‹ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤

### ë²„ì „ íƒ€ì… ê²°ì • ê·œì¹™

- **Major**: ì»¤ë°‹ ë©”ì‹œì§€ì— `BREAKING CHANGE` ë˜ëŠ” `!:` í¬í•¨
- **Minor**: `feat:` ì ‘ë‘ì‚¬ê°€ í¬í•¨ëœ ì»¤ë°‹ì´ ìˆëŠ” ê²½ìš°
- **Patch**: `fix:` ì ‘ë‘ì‚¬ê°€ í¬í•¨ë˜ê±°ë‚˜ ê¸°íƒ€ ë³€ê²½ì‚¬í•­

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
npm-registry/
â”œâ”€â”€ packages/            # ëª¨ë…¸ë ˆí¬ íŒ¨í‚¤ì§€ë“¤
â”œâ”€â”€ .changeset/          # Changesets ì„¤ì • ë° ìƒì„±ëœ ë³€ê²½ ê¸°ë¡
â”œâ”€â”€ .github/             # GitHub Actions ì›Œí¬í”Œë¡œìš° (publish ë“±)
â”œâ”€â”€ package.json         # ë£¨íŠ¸ ìŠ¤í¬ë¦½íŠ¸/ì—”ì§„/ë„êµ¬ ë²„ì „
â”œâ”€â”€ pnpm-workspace.yaml  # pnpm ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì • (packages/*)
â”œâ”€â”€ turbo.json           # Turborepo íŒŒì´í”„ë¼ì¸ (testëŠ” ^build ì˜ì¡´)
â”œâ”€â”€ vitest.config.ts     # ë£¨íŠ¸ Vitest ì„¤ì •(Node env)
â””â”€â”€ README.md            # ì´ íŒŒì¼
```

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **ëª¨ë…¸ë ˆí¬ ê´€ë¦¬**: Turborepo
- **íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €**: pnpm
- **ì–¸ì–´**: TypeScript
- **í…ŒìŠ¤íŠ¸**: Vitest
- **ë¦°íŒ…**: ESLint
- **í¬ë§·íŒ…**: Prettier
- **ë²„ì „ ê´€ë¦¬**: Changesets

## ğŸ“ ê°œë°œ ê°€ì´ë“œ & íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

1. ìƒˆë¡œìš´ íŒ¨í‚¤ì§€ëŠ” `packages/` ë””ë ‰í† ë¦¬ì— ì¶”ê°€í•©ë‹ˆë‹¤
2. ì½”ë“œ ë³€ê²½ ì‹œ `pnpm changeset`ì„ ì‚¬ìš©í•˜ì—¬ ì²´ì¸ì§€ì…‹ì„ ìƒì„±í•©ë‹ˆë‹¤
3. ëª¨ë“  ì»¤ë°‹ ì „ì— `pnpm lint`ì™€ `pnpm test`ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤
4. ì½”ë“œ í¬ë§·íŒ…ì€ `pnpm format`ìœ¼ë¡œ ìë™í™”ë©ë‹ˆë‹¤
5. DOM í™˜ê²½ì´ í•„ìš”í•œ í…ŒìŠ¤íŠ¸(ì˜ˆ: react-hooks)ëŠ” í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ `vitest.config.ts`ì—ì„œ `environment: 'jsdom'`ì„ ì„¤ì •í•˜ê³ , ë£¨íŠ¸ ë‹¨ì¼ ì‹¤í–‰ ëŒ€ì‹  íŒ¨í‚¤ì§€ë³„ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.
6. ë£¨íŠ¸ì—ì„œ `pnpm install` ì‹œ `.npmrc`ì˜ `${NODE_AUTH_TOKEN}` ê²½ê³ ê°€ ë³´ì¼ ìˆ˜ ìˆìœ¼ë‚˜, ì´ëŠ” í…ŒìŠ¤íŠ¸/ë¹Œë“œì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤(ë°°í¬ ì‹œì—ë§Œ í•„ìš”).

### CI/CD
- ë¦´ë¦¬ìŠ¤: GitHub Releaseê°€ ìƒì„±ë˜ë©´ `.github/workflows/publish.yml`ì´ íŠ¸ë¦¬ê±°ë˜ì–´ `pnpm release`ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- ëŸ°íƒ€ì„: CIëŠ” Node 20, pnpm 9ë¡œ ë™ì‘í•©ë‹ˆë‹¤(ë¡œì»¬ ìµœì†Œ ìš”êµ¬ì‚¬í•­ì€ Node>=18, pnpm>=8ì´ë©° pnpm 8.15.6 ê¸°ì¤€ ê²€ì¦ë¨).
- í† í°: CIì—ì„œëŠ” `secrets.GITHUB_TOKEN`ì´ `NODE_AUTH_TOKEN`ìœ¼ë¡œ ì£¼ì…ë©ë‹ˆë‹¤.
- ë¡œì»¬ì—ì„œ ì‹¤ì œ publishê°€ í•„ìš” ì—†ë‹¤ë©´ `pnpm build`ì™€ `pnpm test`ë§Œ ìˆ˜í–‰í•˜ë©´ ë©ë‹ˆë‹¤.
